{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport './js/pixabay-api.js';\nimport './js/render-functions.js';\n\nconst form = document.querySelector('.search-form');\nconst galleryList = document.querySelector('.gallery');\n\nlet qSearchParams = '';\nlet lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  overlayOpacity: 0.8,\n  widthRatio: 0.9,\n  heightRatio: 0.9,\n});\n\nform.addEventListener('submit', searchImages);\n\nfunction searchImages(event) {\n  event.preventDefault();\n  galleryList.innerHTML = '';\n\n  qSearchParams = event.target.elements.query.value;\n  if (qSearchParams === '') return;\n\n  showLoadingImagesMessage();\n\n  fetchImages()\n    .then(images => {\n      closeLoadingImagesMessage();\n      if (images.hits.length === 0) {\n        showNoImagesMessage();\n        return;\n      }\n      renderImages(images);\n    })\n    .catch(error => {\n      closeLoadingImagesMessage();\n      showNoImagesMessage();\n    });\n\n  form.reset();\n}\n\nfunction fetchImages() {\n  const searchParams = new URLSearchParams({\n    key: '46722048-aff8075d188208e090c3b0c14',\n    q: qSearchParams,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n  const url = `https://pixabay.com/api/?${searchParams}`;\n\n  return fetch(url).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n\nfunction renderImages(images) {\n  const markup = images.hits\n    .map(image => {\n      return `<li class=\"gallery-image_item\">\n                     <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n              <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n            </a>\n         <ul class=\"gallery-image_caption\">\n            <li>\n            <p class=\"image-caption_text\">Likes</p>\n            <p class=\"image-caption_number\">${image.likes} </p>\n            </li>\n            <li>\n            <p class=\"image-caption_text\">Views</p>\n            <p class=\"image-caption_number\">${image.views}</p>\n            </li>\n            <li>\n            <p class=\"image-caption_text\">Comments</p>\n            <p class=\"image-caption_number\">${image.comments}</p>\n            </li>\n            <li>\n            <p class=\"image-caption_text\">Downloads</p>\n            <p class=\"image-caption_number\">${image.downloads}</p>\n            </li>\n          </ul>\n        </li>`;\n    })\n    .join('');\n\n  galleryList.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n}\n\nfunction showNoImagesMessage() {\n  iziToast.show({\n    message:\n      '‚ùå Sorry, there are no images matching your search query. Please try again!',\n    messageColor: 'white',\n    messageSize: '18',\n    backgroundColor: 'red',\n    position: 'topRight',\n    timeout: 3000,\n  });\n}\n\nfunction showLoadingImagesMessage() {\n  iziToast.show({\n    message: 'Loading images, please wait...',\n    messageColor: 'black',\n    messageSize: '18',\n    position: 'center',\n    timeout: false,\n    close: true,\n    progressBar: true,\n  });\n}\n\nfunction closeLoadingImagesMessage() {\n  iziToast.hide({}, document.querySelector('.iziToast'));\n}\n"],"names":["form","galleryList","qSearchParams","lightbox","SimpleLightbox","searchImages","event","showLoadingImagesMessage","fetchImages","images","closeLoadingImagesMessage","showNoImagesMessage","renderImages","error","url","response","markup","image","iziToast"],"mappings":"6vBASA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAc,SAAS,cAAc,UAAU,EAErD,IAAIC,EAAgB,GAChBC,EAAW,IAAIC,EAAe,gBAAiB,CACjD,aAAc,MACd,aAAc,IACd,eAAgB,GAChB,WAAY,GACZ,YAAa,EACf,CAAC,EAEDJ,EAAK,iBAAiB,SAAUK,CAAY,EAE5C,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpBL,EAAY,UAAY,GAExBC,EAAgBI,EAAM,OAAO,SAAS,MAAM,MACxCJ,IAAkB,KAEtBK,IAEAC,EAAa,EACV,KAAKC,GAAU,CAEd,GADAC,IACID,EAAO,KAAK,SAAW,EAAG,CAC5BE,IACA,MACD,CACDC,EAAaH,CAAM,CACzB,CAAK,EACA,MAAMI,GAAS,CACdH,IACAC,GACN,CAAK,EAEHX,EAAK,MAAK,EACZ,CAEA,SAASQ,GAAc,CAQrB,MAAMM,EAAM,4BAPS,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGZ,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,CACmD,GAEpD,OAAO,MAAMY,CAAG,EAAE,KAAKC,GAAY,CACjC,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,CACH,CAEA,SAASH,EAAaH,EAAQ,CAC5B,MAAMO,EAASP,EAAO,KACnB,IAAIQ,GACI;AAAA,gCACmBA,EAAM,aAAa;AAAA,0BACzBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,8CAKlBA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,8CAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,8CAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,8CAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,cAIxD,EACA,KAAK,EAAE,EAEVhB,EAAY,mBAAmB,YAAae,CAAM,EAElDb,EAAS,QAAO,CAClB,CAEA,SAASQ,GAAsB,CAC7BO,EAAS,KAAK,CACZ,QACE,6EACF,aAAc,QACd,YAAa,KACb,gBAAiB,MACjB,SAAU,WACV,QAAS,GACb,CAAG,CACH,CAEA,SAASX,GAA2B,CAClCW,EAAS,KAAK,CACZ,QAAS,iCACT,aAAc,QACd,YAAa,KACb,SAAU,SACV,QAAS,GACT,MAAO,GACP,YAAa,EACjB,CAAG,CACH,CAEA,SAASR,GAA4B,CACnCQ,EAAS,KAAK,CAAE,EAAE,SAAS,cAAc,WAAW,CAAC,CACvD"}